<div class="min-h-screen bg-gray-50 font-sans text-gray-900">
  <header class="bg-white shadow-sm sticky top-0 z-50 border-b border-gray-100">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-2 sm:py-3 flex justify-between items-center gap-3 sm:gap-4">
      <div class="flex items-center gap-2.5 sm:gap-3 md:gap-4 min-w-0">
        <div class="relative flex-shrink-0">
          <img src="../../assets/ArchCostEstimator_Logo.png" alt="ArchCostEstimator"
            class="block w-9 h-9 sm:w-11 sm:h-11 md:w-14 md:h-14 object-contain rounded-md bg-white p-0.5" />
        </div>
        <h1
          class="truncate text-lg sm:text-2xl md:text-3xl font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-purple-600 tracking-tight leading-tight">
          ArchCostEstimator
        </h1>
      </div>

      <div class="flex items-center gap-2 sm:gap-3 overflow-x-auto">
        <select [(ngModel)]="selectedCurrency" (change)="calculateCost()"
          class="bg-gray-100 border-none rounded-lg py-1.5 px-2 sm:px-3 text-xs sm:text-sm font-medium hover:bg-gray-200 transition-colors cursor-pointer focus:ring-2 focus:ring-blue-500">
          <option value="USD">USD</option>
          <option value="EUR">EUR</option>
          <option value="GBP">GBP</option>
          <option value="INR">INR</option>
          <option value="JPY">JPY</option>
        </select>

        <select [(ngModel)]="selectedProvider" (change)="calculateCost()"
          class="bg-gray-100 border-none rounded-lg py-1.5 px-2 sm:px-3 text-xs sm:text-sm font-medium hover:bg-gray-200 transition-colors cursor-pointer focus:ring-2 focus:ring-blue-500">
          <optgroup label="Major Global">
            <option value="AWS">AWS</option>
            <option value="Azure">Azure</option>
            <option value="GCP">GCP</option>
            <option value="Oracle Cloud">Oracle Cloud</option>
            <option value="IBM Cloud">IBM Cloud</option>
          </optgroup>
          <optgroup label="Developer">
            <option value="DigitalOcean">DigitalOcean</option>
            <option value="Linode">Linode</option>
            <option value="Vultr">Vultr</option>
            <option value="Hetzner">Hetzner</option>
          </optgroup>
          <optgroup label="Indian üáÆüá≥">
            <option value="Tata IZO">Tata IZO</option>
            <option value="CtrlS">CtrlS</option>
            <option value="Netmagic">Netmagic</option>
            <option value="Yotta">Yotta</option>
          </optgroup>
          <optgroup label="Regional">
            <option value="Alibaba Cloud">Alibaba</option>
            <option value="OVHcloud">OVH</option>
            <option value="Scaleway">Scaleway</option>
            <option value="Vercel">Vercel</option>
          </optgroup>
        </select>

        <button aria-label="Export as PDF" (click)="downloadPDF()"
          class="flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1.5 bg-green-50 text-green-600 rounded-lg hover:bg-green-100 transition-colors font-medium text-xs sm:text-sm shrink-0 focus:outline-none focus:ring-2 focus:ring-green-400">
          <svg class="h-3.5 w-3.5 sm:h-4 sm:w-4" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"
            stroke="currentColor" stroke-width="2">
            <path d="M12 3v9" stroke-linecap="round" />
            <path d="M7 11l5 5 5-5" fill="none" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M4 20h16" stroke-linecap="round" />
          </svg>
          <span class="hidden xs:hidden sm:inline">PDF</span>
        </button>

        <button aria-label="Export as CSV" (click)="downloadCSV()"
          class="flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1.5 bg-purple-50 text-purple-600 rounded-lg hover:bg-purple-100 transition-colors font-medium text-xs sm:text-sm shrink-0 focus:outline-none focus:ring-2 focus:ring-purple-300">
          <svg class="h-3.5 w-3.5 sm:h-4 sm:w-4" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"
            stroke="currentColor" stroke-width="2">
            <path d="M12 3v9" stroke-linecap="round" />
            <path d="M7 11l5 5 5-5" fill="none" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M4 20h16" stroke-linecap="round" />
          </svg>
          <span class="hidden xs:hidden sm:inline">CSV</span>
        </button>

        <button (click)="generateShareUrl()"
          class="flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1.5 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors font-medium text-xs sm:text-sm whitespace-nowrap">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 sm:h-4 sm:w-4" fill="none" viewBox="0 0 24 24"
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z" />
          </svg>
          <span class="hidden sm:inline">{{ shareUrlCopied ? 'Copied!' : 'Share' }}</span>
          <span class="sm:hidden">{{ shareUrlCopied ? '‚úì' : 'Share' }}</span>
        </button>
      </div>
    </div>
  </header>

  <main class="max-w-7xl mx-auto px-3 sm:px-4 md:px-6 lg:px-8 py-4 md:py-8">
    <div aria-hidden="true" class="w-full h-1 mb-4 bg-transparent">
      <div *ngIf="isLoading"
        class="h-1 bg-gradient-to-r from-blue-400 via-blue-600 to-purple-600 animate-pulse rounded-full"
        style="width:100%"></div>
    </div>
    <!-- Architecture Selection -->
    <div class="mb-6 md:mb-10">
      <h2 class="text-lg md:text-xl font-semibold mb-3 md:mb-5 text-gray-800">Select Architecture</h2>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-3 md:gap-4">
        <button (click)="selectedArchitecture = 'monolith'; calculateCost()"
          [class.ring-2]="selectedArchitecture === 'monolith'"
          [class.ring-blue-500]="selectedArchitecture === 'monolith'"
          class="p-3 md:p-4 bg-white rounded-lg md:rounded-xl shadow-sm hover:shadow-md transition-all border border-gray-200 text-left group">
          <div class="flex items-center gap-2 md:gap-3 mb-2 md:mb-3">
            <div class="p-1.5 md:p-2 bg-orange-100 rounded-lg group-hover:bg-orange-200 transition-colors">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 md:h-5 md:w-5 text-orange-600" fill="none"
                viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />
              </svg>
            </div>
            <span class="font-semibold text-sm md:text-base text-gray-800">Monolith</span>
          </div>
          <p class="text-xs md:text-sm text-gray-500">Single codebase, simple deployment. Best for startups.</p>
        </button>

        <button (click)="selectedArchitecture = 'microservices'; calculateCost()"
          [class.ring-2]="selectedArchitecture === 'microservices'"
          [class.ring-blue-500]="selectedArchitecture === 'microservices'"
          class="p-3 md:p-4 bg-white rounded-lg md:rounded-xl shadow-sm hover:shadow-md transition-all border border-gray-200 text-left group">
          <div class="flex items-center gap-2 md:gap-3 mb-2 md:mb-3">
            <div class="p-1.5 md:p-2 bg-purple-100 rounded-lg group-hover:bg-purple-200 transition-colors">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 md:h-5 md:w-5 text-purple-600" fill="none"
                viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z" />
              </svg>
            </div>
            <span class="font-semibold text-sm md:text-base text-gray-800">Microservices</span>
          </div>
          <p class="text-xs md:text-sm text-gray-500">Decoupled services, scalable. High operational complexity.</p>
        </button>

        <button (click)="selectedArchitecture = 'serverless'; calculateCost()"
          [class.ring-2]="selectedArchitecture === 'serverless'"
          [class.ring-blue-500]="selectedArchitecture === 'serverless'"
          class="p-3 md:p-4 bg-white rounded-lg md:rounded-xl shadow-sm hover:shadow-md transition-all border border-gray-200 text-left group">
          <div class="flex items-center gap-2 md:gap-3 mb-2 md:mb-3">
            <div class="p-1.5 md:p-2 bg-green-100 rounded-lg group-hover:bg-green-200 transition-colors">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 md:h-5 md:w-5 text-green-600" fill="none"
                viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
              </svg>
            </div>
            <span class="font-semibold text-sm md:text-base text-gray-800">Serverless</span>
          </div>
          <p class="text-xs md:text-sm text-gray-500">Pay-per-use, auto-scaling. Vendor lock-in risk.</p>
        </button>
      </div>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6 lg:gap-4">
      <!-- Left Column: Inputs -->
      <div class="md:col-span-1 lg:col-span-1 space-y-4 md:space-y-6">
        <app-traffic-input [traffic]="traffic" (trafficChange)="onTrafficChange($event)">
        </app-traffic-input>

        <app-business-metrics [traffic]="traffic" [currencySymbol]="selectedCurrency === 'USD' ? '$' : selectedCurrency"
          (trafficChange)="onTrafficChange($event)">
        </app-business-metrics>

        <app-advanced-config [traffic]="traffic" (trafficChange)="onTrafficChange($event)">
        </app-advanced-config>
      </div>

      <!-- Right Column: Dashboard -->
      <div class="md:col-span-1 lg:col-span-2">
        <div *ngIf="isLoading" class="flex justify-center items-center h-64 bg-white rounded-xl shadow-sm">
          <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>
        </div>

        <div *ngIf="!isLoading && estimationResult" class="space-y-4 md:space-y-6">
          <!-- Cost Summary Cards -->
          <app-cost-summary-cards [totalCost]="estimationResult.monthly_cost.total" [currency]="selectedCurrency"
            [dailyActiveUsers]="traffic.daily_active_users" [yearlyCost]="estimationResult.yearly_cost">
          </app-cost-summary-cards>

          <!-- Cost Chart -->
          <app-cost-chart [costBreakdown]="estimationResult.monthly_cost" [currency]="selectedCurrency">
          </app-cost-chart>

          <!-- Multi-Cloud Comparison -->
          <div class="bg-white p-4 md:p-6 rounded-xl shadow-sm border border-gray-100">
            <h3 class="text-base md:text-lg font-semibold mb-4 md:mb-6 text-gray-800">Cloud Provider Comparison (17
              Providers)</h3>
            <div class="space-y-2 md:space-y-3">
              <div *ngFor="let item of getProvidersList()"
                class="flex flex-col sm:flex-row sm:items-center sm:justify-between p-3 md:p-4 rounded-lg border transition-all gap-2 sm:gap-4"
                [class.bg-green-50]="item.provider === getBestProvider()"
                [class.border-green-300]="item.provider === getBestProvider()"
                [class.border-gray-100]="item.provider !== getBestProvider()"
                [class.shadow-sm]="item.provider === getBestProvider()">
                <div class="flex items-center gap-2 sm:gap-4">
                  <span class="font-semibold text-gray-800 min-w-32">{{item.provider}}</span>
                  <span class="px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full">{{item.category}}</span>
                  <span *ngIf="item.provider === getBestProvider()"
                    class="px-2 sm:px-3 py-1 bg-green-100 text-green-700 text-xs font-semibold rounded-full whitespace-nowrap">
                    ‚ú® Best Value
                  </span>
                </div>
                <div class="text-right">
                  <div class="text-sm font-bold text-gray-900">
                    {{selectedCurrency}} {{item.cost | number:'1.0-0'}}
                  </div>
                  <div class="text-xs text-gray-500">{{item.multiplier}}x</div>
                </div>
              </div>
            </div>
          </div>

          <!-- Infrastructure Requirements -->
          <div *ngIf="getInfrastructureList().length > 0"
            class="bg-white p-4 md:p-6 rounded-xl shadow-sm border border-gray-100">
            <h3 class="text-base md:text-lg font-semibold mb-4 text-gray-800">üèóÔ∏è Infrastructure Requirements</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
              <div *ngFor="let req of getInfrastructureList()" class="border-l-4 border-blue-500 pl-3 py-2 bg-blue-50">
                <div class="text-xs font-medium text-blue-600 uppercase tracking-wide">{{req.key}}</div>
                <div class="font-semibold text-gray-900 mt-1">{{req.value}}</div>
              </div>
            </div>
          </div>

          <!-- Optimization Suggestions -->
          <div
            *ngIf="estimationResult?.optimization_suggestions && estimationResult.optimization_suggestions.length > 0"
            class="bg-white p-4 md:p-6 rounded-xl shadow-sm border border-gray-100">
            <h3 class="text-base md:text-lg font-semibold mb-4 text-gray-800">üí° Cost Optimization Opportunities</h3>
            <div class="space-y-3">
              <div *ngFor="let opt of estimationResult.optimization_suggestions"
                class="border-l-4 border-green-500 pl-4 py-3 bg-green-50 rounded-r-lg">
                <div class="font-semibold text-gray-900">{{opt.title}}</div>
                <div class="text-sm text-gray-600 mt-1">{{opt.description}}</div>
                <div class="text-sm font-bold text-green-600 mt-2">üí∞ Potential Savings: {{opt.saving}}</div>
              </div>
            </div>
          </div>

          <!-- 3-Year Scaling Roadmap -->
          <div *ngIf="getYearProjections().length > 0"
            class="bg-white p-4 md:p-6 rounded-xl shadow-sm border border-gray-100">
            <h3 class="text-base md:text-lg font-semibold mb-4 text-gray-800">üìà 3-Year Scaling Roadmap</h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
              <div *ngFor="let year of getYearProjections()"
                class="text-center p-6 bg-gradient-to-br from-blue-50 to-purple-50 rounded-lg border-2 border-blue-200">
                <div class="text-sm font-medium text-gray-600 mb-2">{{year.year}}</div>
                <div class="text-3xl font-bold text-blue-600">{{selectedCurrency}} {{year.cost | number:'1.0-0'}}</div>
                <div class="text-xs text-gray-500 mt-2">Annual Cost Projection</div>
              </div>
            </div>
          </div>

          <!-- Business Viability -->
          <div *ngIf="getBusinessMetrics().length > 0"
            class="bg-white p-4 md:p-6 rounded-xl shadow-sm border border-gray-100">
            <h3 class="text-base md:text-lg font-semibold mb-4 text-gray-800">üíº Business Viability Analysis</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
              <div *ngFor="let metric of getBusinessMetrics()"
                class="p-4 border-2 border-gray-200 rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-all">
                <div class="text-xs text-gray-500 uppercase tracking-wide font-medium">{{metric.key}}</div>
                <div class="text-lg font-bold text-gray-900 mt-2">{{metric.value}}</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="bg-white border-t border-gray-200 mt-12 md:mt-20 py-8">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">

      <!-- Section 1: About & Status -->
      <div class="flex flex-col md:flex-row justify-between items-start gap-6 md:gap-12 mb-8">

        <!-- About (Left) -->
        <div class="max-w-2xl">
          <p class="text-xs text-gray-500 leading-relaxed text-justify md:text-left">
            ArchCostEstimator is a professional cloud cost intelligence platform. Compare real-time pricing across 17+
            global providers, analyze architectural trade-offs, and generate data-driven 3-year scaling roadmaps
            instantly.
          </p>
        </div>

        <!-- Live Pricing Status (Right) -->
        <div class="flex flex-col md:items-end space-y-1 shrink-0">
          <div *ngIf="pricingStatus"
            class="inline-flex items-center gap-2 px-3 py-1 bg-gray-50 rounded-full border border-gray-200 w-fit">
            <div class="w-2 h-2 rounded-full" [class.bg-green-500]="pricingStatus.using_database"
              [class.bg-yellow-500]="!pricingStatus.using_database">
            </div>
            <span class="text-[11px] font-medium text-gray-600">
              {{pricingStatus.using_database ? 'Live Pricing' : 'Default Pricing'}}
            </span>
          </div>
          <div *ngIf="pricingStatus" class="text-[10px] text-gray-400">
            Updated: {{pricingStatus.last_updated | date:'medium'}}
          </div>
        </div>
      </div>

      <!-- Section 2: Logo & Copyright -->
      <div class="flex flex-col sm:flex-row items-center justify-between gap-4 py-6 border-t border-gray-100">
        <div class="flex items-center gap-2">
          <img src="../../assets/ArchCostEstimator_Logo.png" alt="Logo" class="w-6 h-6 object-contain" />
          <h3 class="text-lg font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-purple-600">
            ArchCostEstimator
          </h3>
          <span class="text-gray-300">|</span>
          <p class="text-[10px] md:text-xs text-gray-400">
            ¬© 2025 ArchCostEstimator. All rights reserved.
          </p>
        </div>

        <!-- Legal Toggle Action -->
        <button (click)="toggleDisclaimer()"
          class="group flex items-center gap-1.5 text-xs font-medium text-gray-400 hover:text-gray-600 transition-colors focus:outline-none">
          <span>Legal Disclaimer</span>
          <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 transition-transform duration-200"
            [class.rotate-180]="showDisclaimer" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
      </div>

      <!-- Collapsible Disclaimer Section -->
      <div *ngIf="showDisclaimer"
        class="mt-6 p-6 bg-gray-50 rounded-xl border border-gray-100 space-y-3 transition-all duration-300 ease-in-out">
        <h5 class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-2">Terms of Use & Disclaimer</h5>

        <p class="text-[11px] text-gray-500 leading-relaxed text-justify">
          The information, pricing data, and cost estimations provided through the ArchCostEstimator
          platform are intended solely for general informational and estimation purposes.
          The figures generated or displayed do not represent actual quotations, official pricing,
          financial advice, or legally binding offers of any kind.
        </p>
        <p class="text-[11px] text-gray-500 leading-relaxed text-justify">
          Cloud computing and associated service costs are subject to frequent changes based on numerous
          variables, including but not limited to usage patterns, service configurations, provider-specific
          pricing models, regional factors, currency exchange rates, and applicable discounts or promotions.
          Consequently, the estimates produced by ArchCostEstimator may differ significantly from the
          actual costs incurred.
        </p>
        <p class="text-[11px] text-gray-500 leading-relaxed text-justify">
          While ArchCostEstimator strives to present accurate and up-to-date information, no guarantees
          or warranties, express or implied, are made regarding the completeness, accuracy, reliability,
          or suitability of any cost information or outcomes generated by the tool. All data and results
          are provided on an ‚Äúas is‚Äù and ‚Äúas available‚Äù basis and may be modified, updated, or
          discontinued without prior notice.
        </p>
        <p class="text-[11px] text-gray-500 leading-relaxed text-justify">
          Users are strongly advised to independently verify all pricing details directly with respective
          cloud service providers before making any purchasing, budgeting, or architectural decisions.
          Under no circumstances shall ArchCostEstimator, its developers, affiliates, or partners be held
          liable for any direct, indirect, incidental, consequential, or special losses, damages, or
          expenses arising from or related to the use of, or reliance on, the information and cost.
        </p>
      </div>
    </div>
  </footer>
</div>